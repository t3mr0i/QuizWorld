<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Quizaru - Interactive Quiz Game</title>
    <meta name="description" content="Create and play interactive quizzes with AI-generated questions">
    
    <!-- Preload critical resources -->
    <link rel="preload" href="https://fonts.googleapis.com/css2?family=Inter:wght@400;500;700;900&display=swap" as="style">
    <link rel="preload" href="https://fonts.googleapis.com/css2?family=Roboto+Mono:wght@400;500;700&display=swap" as="style">
    <link rel="preload" href="js/quiz-game.js" as="script">
    
    <!-- Critical CSS inlined for immediate rendering -->
    <style>
        /* CSS Variables */
        :root {
          --digital-void-bg: #DEE4EC;
          --kb-black: #131417;
          --kb-grey: #7E8187;
          --kb-light-grey: #A8ADB4;
          --teen-orange: #FF4600;
          --electric-cyan: #00F9FF;
          --neon-lime: #D2FF00;
          --font-primary: 'Inter', -apple-system, BlinkMacSystemFont, 'Segoe UI', Roboto, sans-serif;
          --font-display: 'Roboto Mono', monospace;
          --primary-accent-color: var(--teen-orange);
          --secondary-accent-color: var(--electric-cyan);
          --secondary-accent-color-2: var(--neon-lime);
          --text-color-secondary: var(--kb-grey);
        }

        * {
          margin: 0;
          padding: 0;
          box-sizing: border-box;
        }

        body {
          font-family: var(--font-primary);
          font-size: 16px;
          line-height: 1.6;
          color: var(--kb-black);
          background-color: var(--digital-void-bg);
          -webkit-font-smoothing: antialiased;
        }

        .app-container {
          min-height: 100vh;
          display: flex;
          flex-direction: column;
          max-width: 1200px;
          margin: 0 auto;
          padding: 24px;
        }

        .game-container {
          flex: 1;
          display: flex;
          flex-direction: column;
          justify-content: center;
          align-items: center;
          width: 100%;
        }

        /* Card styles */
        .card {
          background-color: rgba(255, 255, 255, 0.9);
          border: 3px solid var(--kb-black);
          box-shadow: 8px 8px 0 rgba(19, 20, 23, 0.1);
          width: 100%;
          max-width: 800px;
          margin: 0 auto;
        }

        .card-header {
          padding: 24px 32px;
          border-bottom: 2px solid var(--kb-black);
        }

        .card-body {
          padding: 24px 32px;
        }

        /* Typography */
        h1, h2, h3 {
          font-family: var(--font-display);
          font-weight: 900;
          text-transform: uppercase;
          letter-spacing: 0.05em;
          margin-bottom: 16px;
        }

        h1 { font-size: 2.5rem; }
        h2 { font-size: 2rem; }
        h3 { font-size: 1.5rem; }

        /* Welcome screen styles */
        .welcome-options {
          display: grid;
          grid-template-columns: repeat(auto-fit, minmax(250px, 1fr));
          gap: 24px;
          margin-top: 24px;
        }

        .option-card {
          background: rgba(255, 255, 255, 0.8);
          border: 2px solid var(--kb-black);
          padding: 24px;
          text-align: center;
          transition: all 0.25s ease-in-out;
          cursor: pointer;
        }

        .option-card:hover {
          transform: translateY(-2px);
          box-shadow: 4px 4px 0 rgba(19, 20, 23, 0.2);
        }

        .option-icon {
          font-size: 3rem;
          margin-bottom: 16px;
          color: var(--teen-orange);
        }

        /* Button styles */
        .btn {
          display: inline-block;
          padding: 12px 24px;
          font-family: var(--font-display);
          font-weight: 700;
          text-transform: uppercase;
          letter-spacing: 0.05em;
          border: 2px solid var(--kb-black);
          background: white;
          color: var(--kb-black);
          cursor: pointer;
          transition: all 0.15s ease-in-out;
          text-decoration: none;
          font-size: 14px;
        }

        .btn:hover {
          transform: translateY(-2px);
          box-shadow: 2px 2px 0 var(--kb-black);
        }

        .btn-primary {
          background: var(--teen-orange);
          color: white !important;
          border-color: var(--teen-orange);
        }

        .btn-primary *,
        .btn-primary .btn-text,
        .btn-primary span {
          color: white !important;
        }

        .btn-outline {
          background: transparent;
          color: var(--kb-black);
        }

        .btn-text {
          background: transparent;
          border: none;
          color: var(--kb-grey);
          text-transform: none;
          font-weight: 500;
        }

        /* Disabled button styles */
        .btn:disabled,
        .btn[disabled] {
          opacity: 1 !important;
          cursor: not-allowed !important;
          transform: none !important;
          color: white !important;
          background: repeating-linear-gradient(
            45deg,
            var(--kb-light-grey),
            var(--kb-light-grey) 10px,
            var(--kb-grey) 10px,
            var(--kb-grey) 20px
          ) !important;
          border-color: var(--kb-grey) !important;
          pointer-events: none !important;
        }

        .btn:disabled *,
        .btn:disabled .btn-text,
        .btn:disabled span,
        #generate-quiz-btn:disabled,
        #generate-quiz-btn:disabled *,
        #generate-quiz-btn:disabled .btn-text,
        #generate-quiz-btn:disabled span,
        #generate-quiz-btn[disabled],
        #generate-quiz-btn[disabled] *,
        #generate-quiz-btn[disabled] .btn-text,
        #generate-quiz-btn[disabled] span {
          color: white !important;
        }

        .btn-disabled {
          opacity: 0.6 !important;
          cursor: not-allowed !important;
          transform: none !important;
          background: var(--kb-light-grey) !important;
          border-color: var(--kb-grey) !important;
        }

        /* Force Generate Quiz button text to always be white */
        #generate-quiz-btn,
        #generate-quiz-btn *,
        #generate-quiz-btn .btn-text,
        #generate-quiz-btn span,
        #generate-quiz-btn:hover,
        #generate-quiz-btn:hover *,
        #generate-quiz-btn:hover .btn-text,
        #generate-quiz-btn:hover span,
        #generate-quiz-btn:focus,
        #generate-quiz-btn:focus *,
        #generate-quiz-btn:focus .btn-text,
        #generate-quiz-btn:focus span,
        #generate-quiz-btn:active,
        #generate-quiz-btn:active *,
        #generate-quiz-btn:active .btn-text,
        #generate-quiz-btn:active span {
          color: white !important;
        }

        /* Form styles */
        .form-group {
          margin-bottom: 20px;
        }

        .form-row {
          display: grid;
          grid-template-columns: 1fr 1fr;
          gap: 20px;
        }

        .form-row.single-column {
          grid-template-columns: 1fr;
        }

        .form-actions {
          display: flex;
          justify-content: space-between;
          align-items: center;
          margin-top: 24px;
        }

        label {
          display: block;
          font-weight: 600;
          margin-bottom: 8px;
          color: var(--kb-black);
        }

        input[type="text"], 
        input[type="number"], 
        textarea, 
        select {
          width: 100%;
          padding: 12px;
          border: 2px solid var(--kb-black);
          font-family: var(--font-primary);
          font-size: 16px;
          color: var(--kb-black) !important;
          background-color: rgba(255, 255, 255, 0.9) !important;
          -webkit-appearance: none;
          -moz-appearance: none;
          appearance: none;
        }

        input:focus, textarea:focus, select:focus {
          outline: none;
          border-color: var(--teen-orange);
          background-color: rgba(255, 255, 255, 1) !important;
        }

        select {
          background-image: none !important;
          cursor: pointer;
        }

        small {
          color: var(--kb-grey);
          font-size: 14px;
        }

        /* Utility classes */
        .hidden {
          display: none !important;
        }

        .game-screen {
          display: none;
          width: 100%;
        }

        .game-screen.active {
          display: block;
          animation: fadeIn 0.3s ease-in-out;
        }

        @keyframes fadeIn {
          from { opacity: 0; transform: translateY(10px); }
          to { opacity: 1; transform: translateY(0); }
        }

        /* Loading overlay */
        .loading-overlay {
          position: fixed;
          top: 0;
          left: 0;
          width: 100%;
          height: 100%;
          background: rgba(0, 0, 0, 0.8);
          display: flex;
          align-items: center;
          justify-content: center;
          z-index: 9999;
          color: white;
        }

        .loading-content {
          text-align: center;
        }

        .loading-spinner {
          width: 40px;
          height: 40px;
          border: 4px solid rgba(255, 255, 255, 0.3);
          border-top: 4px solid white;
          border-radius: 50%;
          animation: spin 1s linear infinite;
          margin: 0 auto 20px;
        }

        @keyframes spin {
          0% { transform: rotate(0deg); }
          100% { transform: rotate(360deg); }
        }

        /* Navbar styles */
        .navbar {
          background: var(--kb-black);
          border-bottom: 2px solid var(--primary-accent-color);
          padding: 12px 0;
          position: sticky;
          top: 0;
          z-index: 1000;
        }

        .navbar-container {
          max-width: 1200px;
          margin: 0 auto;
          padding: 0 20px;
          display: flex;
          align-items: center;
          justify-content: space-between;
        }

        .navbar-brand {
          color: white;
          text-decoration: none;
          font-weight: 900;
          font-size: 1.5rem;
          display: flex;
          align-items: center;
          gap: 8px;
        }

        .navbar-brand:hover {
          color: var(--primary-accent-color);
        }

        /* Modal styles */
        .modal-overlay {
          position: fixed;
          top: 0;
          left: 0;
          width: 100%;
          height: 100%;
          background: rgba(0, 0, 0, 0.7);
          display: flex;
          align-items: center;
          justify-content: center;
          z-index: 10000;
          opacity: 0;
          transition: opacity 0.3s ease;
        }

        .modal-overlay.show {
          opacity: 1;
        }

        .modal-content {
          background: white;
          border-radius: 12px;
          max-width: 500px;
          width: 90%;
          max-height: 80vh;
          overflow-y: auto;
          box-shadow: 0 20px 40px rgba(0, 0, 0, 0.3);
        }

        .modal-header {
          padding: 20px 24px 0;
          border-bottom: 1px solid #eee;
        }

        .modal-title {
          margin: 0 0 16px 0;
          font-size: 1.2rem;
          font-weight: 700;
        }

        .modal-body {
          padding: 20px 24px;
        }

        .modal-footer {
          padding: 0 24px 20px;
          display: flex;
          gap: 12px;
          justify-content: flex-end;
        }

        .form-control {
          width: 100%;
          padding: 10px 12px;
          border: 2px solid #ddd;
          border-radius: 6px;
          font-size: 16px;
          margin-top: 8px;
        }

        /* Toast styles */
        .toast-container {
          position: fixed;
          top: 20px;
          right: 20px;
          z-index: 10001;
          display: flex;
          flex-direction: column;
          gap: 8px;
        }

        .toast {
          padding: 12px 20px;
          border-radius: 8px;
          color: white;
          font-weight: 500;
          transform: translateX(100%);
          transition: transform 0.3s ease;
          min-width: 250px;
        }

        .toast.show {
          transform: translateX(0);
        }

        .toast-success {
          background: #28a745;
        }

        .toast-error {
          background: #dc3545;
        }

        .toast-info {
          background: #17a2b8;
        }

        /* Additional styles for elements referenced in JavaScript */
        .player-list {
          list-style: none;
          padding: 0;
        }

        .player-item {
          padding: 8px 12px;
          margin-bottom: 4px;
          background: rgba(255, 255, 255, 0.5);
          border-radius: 4px;
          display: flex;
          justify-content: space-between;
          align-items: center;
        }

        .player-item.host {
          background: rgba(255, 70, 0, 0.1);
        }

        .player-item.ready {
          background: rgba(40, 167, 69, 0.1);
        }

        .badge {
          padding: 4px 8px;
          border-radius: 4px;
          font-size: 12px;
          font-weight: 600;
          text-transform: uppercase;
        }

        .badge.host {
          background: var(--teen-orange);
          color: white;
        }

        .badge.ready {
          background: #28a745;
          color: white;
        }

        .answer-options {
          display: grid;
          gap: 12px;
          margin: 20px 0;
        }

        .answer-option {
          padding: 16px;
          border: 2px solid var(--kb-black);
          background: white;
          cursor: pointer;
          transition: all 0.2s ease;
          font-size: 16px;
          text-align: left;
        }

        .answer-option:hover {
          background: rgba(255, 70, 0, 0.1);
          transform: translateY(-1px);
        }

        .answer-option.selected {
          background: var(--teen-orange);
          color: white;
        }

        .answer-option.correct {
          background: #28a745;
          color: white;
          border-color: #28a745;
        }

        .answer-option.incorrect {
          background: #dc3545;
          color: white;
          border-color: #dc3545;
        }

        .answer-option.neutral {
          background: rgba(126, 129, 135, 0.1);
          color: var(--kb-grey);
        }

        .leaderboard {
          display: flex;
          flex-direction: column;
          gap: 8px;
        }

        .score-item, .live-score-item {
          display: flex;
          justify-content: space-between;
          align-items: center;
          padding: 12px 16px;
          background: rgba(255, 255, 255, 0.8);
          border-radius: 6px;
          border: 1px solid #ddd;
        }

        .score-item.first-place {
          background: linear-gradient(135deg, #ffd700, #ffed4e);
          border-color: #ffd700;
        }

        .score-item.second-place {
          background: linear-gradient(135deg, #c0c0c0, #e8e8e8);
          border-color: #c0c0c0;
        }

        .score-item.third-place {
          background: linear-gradient(135deg, #cd7f32, #daa520);
          border-color: #cd7f32;
        }

        .score-item.current-player {
          border: 2px solid var(--teen-orange);
          background: rgba(255, 70, 0, 0.1);
        }

        .inline-results {
          margin-top: 24px;
          padding: 20px;
          background: rgba(255, 255, 255, 0.8);
          border-radius: 8px;
          border: 2px solid var(--electric-cyan);
        }

        .search-section {
          margin-bottom: 24px;
        }

        .search-bar {
          display: flex;
          gap: 12px;
          margin-bottom: 16px;
        }

        .search-bar input {
          flex: 1;
        }

        .filter-tabs {
          display: flex;
          gap: 8px;
        }

        .tab-btn {
          padding: 8px 16px;
          border: 2px solid var(--kb-black);
          background: white;
          cursor: pointer;
          font-family: var(--font-display);
          font-weight: 600;
          text-transform: uppercase;
          font-size: 12px;
        }

        .tab-btn.active {
          background: var(--teen-orange);
          color: white;
        }

        .quiz-list {
          display: flex;
          flex-direction: column;
          gap: 16px;
        }

        .quiz-item {
          padding: 20px;
          background: rgba(255, 255, 255, 0.8);
          border: 2px solid var(--kb-black);
          border-radius: 8px;
        }

        .quiz-item-header {
          margin-bottom: 12px;
        }

        .quiz-item-title {
          font-size: 1.2rem;
          font-weight: 700;
          margin-bottom: 4px;
        }

        .quiz-item-topic {
          color: var(--kb-grey);
          margin-bottom: 4px;
        }

        .quiz-item-creator {
          font-size: 14px;
          color: var(--kb-grey);
        }

        .quiz-item-stats {
          display: flex;
          gap: 16px;
          margin-bottom: 16px;
          font-size: 14px;
        }

        .quiz-stat {
          display: flex;
          align-items: center;
          gap: 4px;
          color: var(--kb-grey);
        }

        .quiz-stat i {
          font-size: 14px;
        }

        .quiz-item-actions {
          display: flex;
          gap: 12px;
        }

        /* Tournament Creation Styles */
        .tournament-overview {
          margin: 24px 0;
          padding: 20px;
          background: linear-gradient(135deg, rgba(255, 70, 0, 0.05), rgba(0, 249, 255, 0.05));
          border: 2px solid var(--kb-black);
          border-radius: 8px;
        }

        .tournament-stats {
          display: grid;
          grid-template-columns: repeat(auto-fit, minmax(150px, 1fr));
          gap: 16px;
        }

        .stat-card {
          display: flex;
          align-items: center;
          gap: 12px;
          padding: 16px;
          background: rgba(255, 255, 255, 0.8);
          border: 2px solid var(--kb-black);
          border-radius: 6px;
          transition: all 0.2s ease;
        }

        .stat-card:hover {
          transform: translateY(-2px);
          box-shadow: 4px 4px 0 rgba(19, 20, 23, 0.1);
        }

        .stat-icon {
          font-size: 24px;
          color: var(--teen-orange);
        }

        .stat-info {
          display: flex;
          flex-direction: column;
        }

        .stat-value {
          font-family: var(--font-display);
          font-weight: 900;
          font-size: 1.5rem;
          color: var(--kb-black);
        }

        .stat-label {
          font-size: 12px;
          color: var(--kb-grey);
          text-transform: uppercase;
          letter-spacing: 0.05em;
        }

        .tournament-step {
          margin: 24px 0;
          padding: 20px;
          background: rgba(210, 255, 0, 0.1);
          border-left: 4px solid var(--neon-lime);
          border-radius: 0 6px 6px 0;
        }

        .tournament-step h3 {
          margin: 0 0 8px 0;
          color: var(--kb-black);
          font-size: 1.2rem;
          display: flex;
          align-items: center;
          gap: 8px;
        }

        .tournament-step p {
          margin: 0;
          color: var(--kb-grey);
        }

        .available-quizzes-section,
        .selected-quizzes-section {
          margin: 24px 0;
        }

        .section-header {
          display: flex;
          justify-content: space-between;
          align-items: center;
          margin-bottom: 16px;
          padding-bottom: 8px;
          border-bottom: 2px solid var(--kb-black);
        }

        .section-header h4 {
          margin: 0;
          font-family: var(--font-display);
          font-weight: 700;
          color: var(--kb-black);
          display: flex;
          align-items: center;
          gap: 8px;
        }

        .quiz-counter {
          font-size: 14px;
          color: var(--kb-grey);
          font-weight: 500;
        }

        .selection-hint {
          font-size: 14px;
          color: var(--kb-grey);
        }

        .tournament-quiz-grid {
          display: grid;
          grid-template-columns: repeat(auto-fill, minmax(200px, 1fr));
          gap: 12px;
          max-height: 500px;
          overflow-y: auto;
          padding: 16px;
          background: rgba(255, 255, 255, 0.3);
          border: 2px dashed var(--kb-light-grey);
          border-radius: 8px;
        }

        .tournament-quiz-card {
          max-width: 220px;
          max-height: 140px;
          padding: 12px;
          background: rgba(255, 255, 255, 0.9);
          border: 2px solid var(--kb-black);
          border-radius: 6px;
          cursor: grab;
          transition: all 0.25s ease;
          position: relative;
          user-select: none;
          overflow: hidden;
        }

        .tournament-quiz-card:active {
          cursor: grabbing;
        }

        .tournament-quiz-card:hover {
          transform: translateY(-2px);
          box-shadow: 4px 4px 0 rgba(19, 20, 23, 0.2);
          background: rgba(255, 255, 255, 1);
        }

        .tournament-quiz-card.dragging {
          opacity: 0.8;
          transform: rotate(5deg);
          z-index: 1000;
          box-shadow: 8px 8px 16px rgba(0, 0, 0, 0.3);
        }

        .tournament-quiz-card.selected {
          background: rgba(255, 70, 0, 0.1);
          border-color: var(--teen-orange);
          border-width: 3px;
        }

        .tournament-quiz-card.selected::after {
          content: '‚úì';
          position: absolute;
          top: 6px;
          right: 6px;
          width: 20px;
          height: 20px;
          background: var(--teen-orange);
          color: white;
          border-radius: 50%;
          display: flex;
          align-items: center;
          justify-content: center;
          font-weight: bold;
          font-size: 12px;
        }

        .tournament-quiz-title {
          font-weight: 700;
          color: var(--kb-black);
          margin-bottom: 4px;
          font-size: 14px;
          line-height: 1.2;
          overflow: hidden;
          text-overflow: ellipsis;
          white-space: nowrap;
        }

        .tournament-quiz-topic {
          color: var(--kb-grey);
          font-size: 12px;
          margin-bottom: 6px;
          line-height: 1.3;
          overflow: hidden;
          text-overflow: ellipsis;
          display: -webkit-box;
          -webkit-line-clamp: 2;
          -webkit-box-orient: vertical;
        }

        .tournament-quiz-meta {
          display: flex;
          justify-content: space-between;
          align-items: center;
          font-size: 11px;
          color: var(--kb-grey);
          margin-top: 6px;
          padding-top: 6px;
          border-top: 1px solid rgba(126, 129, 135, 0.2);
        }

        .tournament-quiz-stats {
          display: flex;
          gap: 8px;
        }

        .tournament-quiz-stat {
          display: flex;
          align-items: center;
          gap: 2px;
          font-size: 10px;
        }

        .tournament-quiz-stat i {
          font-size: 10px;
        }

        .tournament-quiz-creator {
          font-size: 11px;
          color: var(--kb-grey);
          font-weight: 500;
          overflow: hidden;
          text-overflow: ellipsis;
          white-space: nowrap;
        }

        .selected-quiz-list {
          min-height: 180px;
          padding: 16px;
          background: rgba(210, 255, 0, 0.05);
          border: 2px dashed var(--neon-lime);
          border-radius: 8px;
          transition: all 0.3s ease;
        }

        .selected-quiz-list.drag-over {
          background: rgba(210, 255, 0, 0.15);
          border-color: var(--neon-lime);
          border-style: solid;
          transform: scale(1.02);
        }

        .selected-quiz-grid {
          display: grid;
          grid-template-columns: repeat(auto-fill, minmax(200px, 1fr));
          gap: 12px;
        }

        .empty-selection {
          text-align: center;
          color: var(--kb-grey);
          padding: 20px;
        }

        .empty-selection i {
          font-size: 48px;
          color: var(--kb-light-grey);
          margin-bottom: 12px;
        }

        .empty-selection p {
          margin: 0 0 4px 0;
          font-weight: 500;
        }

        .empty-selection small {
          color: var(--kb-light-grey);
        }

                 .selected-quiz-item {
           display: flex;
           justify-content: space-between;
           align-items: center;
           padding: 12px 16px;
           margin-bottom: 8px;
           background: rgba(255, 255, 255, 0.8);
           border: 2px solid var(--neon-lime);
           border-radius: 6px;
           transition: all 0.2s ease;
           animation: slideInFromLeft 0.3s ease-out forwards;
         }

         @keyframes slideInFromLeft {
           from {
             opacity: 0;
             transform: translateX(-20px);
           }
           to {
             opacity: 1;
             transform: translateX(0);
           }
         }

        .selected-quiz-item:hover {
          background: rgba(255, 255, 255, 1);
          transform: translateX(4px);
        }

        .selected-quiz-info {
          flex: 1;
        }

        .selected-quiz-title {
          font-weight: 600;
          color: var(--kb-black);
          margin-bottom: 4px;
        }

        .selected-quiz-details {
          font-size: 14px;
          color: var(--kb-grey);
        }

        .remove-quiz-btn {
          width: 32px;
          height: 32px;
          background: var(--teen-orange);
          color: white;
          border: none;
          border-radius: 50%;
          cursor: pointer;
          font-weight: bold;
          font-size: 18px;
          transition: all 0.2s ease;
          display: flex;
          align-items: center;
          justify-content: center;
        }

        .remove-quiz-btn:hover {
          background: #e03e00;
          transform: scale(1.1);
        }

        #tournament-btn-text {
          margin-left: 8px;
        }

        /* Loading states for tournament */
        .tournament-loading {
          display: flex;
          flex-direction: column;
          align-items: center;
          justify-content: center;
          padding: 40px;
          color: var(--kb-grey);
        }

        .tournament-loading .loading-spinner {
          width: 32px;
          height: 32px;
          border: 3px solid rgba(126, 129, 135, 0.3);
          border-top: 3px solid var(--teen-orange);
          border-radius: 50%;
          animation: spin 1s linear infinite;
          margin-bottom: 16px;
        }

        /* Quiz Interface Enhancements */
        .question-info {
          display: flex;
          justify-content: space-between;
          align-items: center;
          width: 100%;
          gap: 24px;
        }

        .question-progress {
          flex: 1;
        }

        .question-counter {
          font-family: var(--font-display);
          font-weight: 700;
          color: var(--kb-black);
          margin-bottom: 8px;
          display: block;
        }

        .progress-bar {
          width: 100%;
          height: 8px;
          background: rgba(126, 129, 135, 0.2);
          border-radius: 4px;
          overflow: hidden;
          border: 1px solid var(--kb-black);
        }

        .progress-fill {
          height: 100%;
          background: linear-gradient(90deg, var(--teen-orange), var(--electric-cyan));
          border-radius: 3px;
          transition: width 0.5s ease;
          width: 10%;
        }

        .player-status {
          display: flex;
          flex-direction: column;
          align-items: flex-end;
          gap: 8px;
        }

        .answer-counter {
          display: flex;
          align-items: center;
          gap: 8px;
          font-weight: 600;
          color: var(--kb-black);
        }

        .answer-counter i {
          font-size: 16px;
          color: var(--teen-orange);
        }

        .answer-status-indicator {
          padding: 6px 12px;
          border-radius: 12px;
          font-size: 14px;
          font-weight: 500;
          transition: all 0.3s ease;
        }

        .answer-status-indicator.waiting {
          background: rgba(255, 70, 0, 0.1);
          color: var(--teen-orange);
          border: 1px solid var(--teen-orange);
        }

        .answer-status-indicator.answered {
          background: rgba(210, 255, 0, 0.2);
          color: var(--kb-black);
          border: 1px solid var(--neon-lime);
        }

        .answer-status-indicator.complete {
          background: rgba(0, 249, 255, 0.2);
          color: var(--kb-black);
          border: 1px solid var(--electric-cyan);
        }

        .status-text {
          display: flex;
          align-items: center;
          gap: 6px;
        }

        .status-pulse {
          width: 8px;
          height: 8px;
          border-radius: 50%;
          background: var(--teen-orange);
          animation: pulse 2s infinite;
        }

        .status-checkmark {
          color: var(--neon-lime);
          font-weight: bold;
        }

        @keyframes pulse {
          0% {
            opacity: 1;
            transform: scale(1);
          }
          50% {
            opacity: 0.5;
            transform: scale(1.2);
          }
          100% {
            opacity: 1;
            transform: scale(1);
          }
        }

        /* Live Scores Enhancement */
        .live-leaderboard {
          margin-top: 24px;
          padding: 20px;
          background: rgba(255, 255, 255, 0.8);
          border: 2px solid var(--kb-black);
          border-radius: 8px;
        }

        .live-leaderboard h3 {
          margin: 0 0 16px 0;
          display: flex;
          align-items: center;
          gap: 8px;
          color: var(--kb-black);
        }

        .live-score-item {
          display: flex;
          justify-content: space-between;
          align-items: center;
          padding: 12px 16px;
          margin-bottom: 8px;
          background: rgba(255, 255, 255, 0.8);
          border-radius: 6px;
          border: 1px solid rgba(126, 129, 135, 0.2);
          transition: all 0.3s ease;
        }

        .live-score-item.current-player {
          border: 2px solid var(--teen-orange);
          background: rgba(255, 70, 0, 0.1);
          transform: scale(1.02);
        }

        .live-score-item.first-place {
          background: linear-gradient(135deg, #ffd700, #ffed4e);
          border-color: #ffd700;
        }

        .live-score-item.second-place {
          background: linear-gradient(135deg, #c0c0c0, #e8e8e8);
          border-color: #c0c0c0;
        }

        .live-score-item.third-place {
          background: linear-gradient(135deg, #cd7f32, #daa520);
          border-color: #cd7f32;
        }

        .player-rank {
          font-weight: 700;
          font-family: var(--font-display);
          color: var(--kb-black);
          margin-right: 12px;
        }

        .player-info {
          flex: 1;
          display: flex;
          align-items: center;
          gap: 8px;
        }

        .player-name {
          font-weight: 600;
          color: var(--kb-black);
        }

        .player-badge {
          padding: 2px 6px;
          border-radius: 4px;
          font-size: 12px;
          font-weight: 600;
          text-transform: uppercase;
        }

        .player-badge.you {
          background: var(--teen-orange);
          color: white;
        }

        .player-score {
          font-weight: 700;
          font-family: var(--font-display);
          color: var(--kb-black);
        }

        .leaderboard-status {
          font-size: 14px;
          font-weight: 500;
          color: var(--kb-grey);
          margin-left: 12px;
        }

        /* Responsive quiz interface */
        @media (max-width: 768px) {
          .question-info {
            flex-direction: column;
            gap: 16px;
          }
          
          .player-status {
            align-items: center;
            width: 100%;
          }
          
          .answer-counter {
            justify-content: center;
          }
        }

        /* Highscores Modal Styles */
        .highscores-modal {
          position: fixed;
          top: 0;
          left: 0;
          width: 100%;
          height: 100%;
          background: rgba(0, 0, 0, 0.7);
          display: flex;
          align-items: center;
          justify-content: center;
          z-index: 10000;
          opacity: 0;
          transition: opacity 0.3s ease;
        }

        .highscores-modal:focus {
          outline: none;
        }

        .highscores-modal.show {
          opacity: 1;
        }

        .highscores-content {
          background: white;
          border: 3px solid var(--kb-black);
          border-radius: 12px;
          max-width: 600px;
          width: 90%;
          max-height: 80vh;
          overflow-y: auto;
          box-shadow: 0 20px 40px rgba(0, 0, 0, 0.3);
          animation: slideIn 0.3s ease-out;
        }

        @keyframes slideIn {
          from {
            transform: translateY(-20px);
            opacity: 0;
          }
          to {
            transform: translateY(0);
            opacity: 1;
          }
        }

        .highscores-header {
          padding: 24px 32px;
          border-bottom: 2px solid var(--kb-black);
          display: flex;
          justify-content: space-between;
          align-items: center;
          background: linear-gradient(135deg, rgba(255, 70, 0, 0.1), rgba(0, 249, 255, 0.1));
        }

        .highscores-header h3 {
          margin: 0;
          font-family: var(--font-display);
          font-weight: 900;
          color: var(--kb-black);
          display: flex;
          align-items: center;
          gap: 8px;
        }

        .highscores-header h3::before {
          content: 'üèÜ';
          font-size: 1.2em;
        }

        .close-btn {
          width: 32px;
          height: 32px;
          border: 2px solid var(--kb-black);
          background: white;
          font-size: 20px;
          font-weight: bold;
          cursor: pointer;
          transition: all 0.2s ease;
          display: flex;
          align-items: center;
          justify-content: center;
          border-radius: 4px;
        }

        .close-btn:hover {
          background: var(--teen-orange);
          color: white;
          transform: scale(1.1);
        }

        .highscore-list {
          list-style: none;
          padding: 24px 32px;
          margin: 0;
        }

        .highscore-item {
          display: flex;
          justify-content: space-between;
          align-items: center;
          padding: 16px 20px;
          margin-bottom: 12px;
          background: rgba(255, 255, 255, 0.8);
          border: 2px solid var(--kb-black);
          border-radius: 8px;
          transition: all 0.2s ease;
        }

        .highscore-item:hover {
          transform: translateY(-2px);
          box-shadow: 4px 4px 0 rgba(19, 20, 23, 0.1);
        }

        .highscore-item:first-child {
          background: linear-gradient(135deg, #ffd700, #ffed4e);
          border-color: #ffd700;
        }

        .highscore-item:nth-child(2) {
          background: linear-gradient(135deg, #c0c0c0, #e8e8e8);
          border-color: #c0c0c0;
        }

        .highscore-item:nth-child(3) {
          background: linear-gradient(135deg, #cd7f32, #daa520);
          border-color: #cd7f32;
        }

        .highscore-rank {
          font-family: var(--font-display);
          font-weight: 900;
          color: var(--kb-black);
          min-width: 40px;
        }

        .highscore-rank::before {
          content: '';
        }

        .highscore-item:first-child .highscore-rank::before {
          content: 'ü•á ';
        }

        .highscore-item:nth-child(2) .highscore-rank::before {
          content: 'ü•à ';
        }

        .highscore-item:nth-child(3) .highscore-rank::before {
          content: 'ü•â ';
        }

        .highscore-name {
          flex: 1;
          font-weight: 600;
          color: var(--kb-black);
          margin: 0 16px;
        }

        .highscore-score {
          font-family: var(--font-display);
          font-weight: 700;
          color: var(--kb-black);
          text-align: right;
        }

        /* Empty state for highscores */
        .highscore-item:only-child {
          text-align: center;
          color: var(--kb-grey);
          font-style: italic;
          background: rgba(126, 129, 135, 0.1);
          border-color: var(--kb-light-grey);
        }

        /* Responsive tournament design */
        @media (max-width: 768px) {
          .tournament-stats {
            grid-template-columns: 1fr;
          }
          
          .section-header {
            flex-direction: column;
            align-items: flex-start;
            gap: 8px;
          }
          
          .tournament-quiz-grid {
            grid-template-columns: 1fr;
          }
          
          .stat-card {
            justify-content: center;
          }

          .highscores-content {
            width: 95%;
            margin: 20px;
          }

          .highscores-header,
          .highscore-list {
            padding: 16px 20px;
          }

          .highscore-item {
            flex-direction: column;
            text-align: center;
            gap: 8px;
          }

          .highscore-name {
            margin: 0;
          }
        }

        @media (max-width: 768px) {
          .app-container { padding: 16px; }
          .welcome-options { grid-template-columns: 1fr; }
          .card-header, .card-body { padding: 16px; }
          .form-row { grid-template-columns: 1fr; }
          h1 { font-size: 1.8rem; }
          h2 { font-size: 1.5rem; }
          .modal-content { width: 95%; }
          .modal-header, .modal-body, .modal-footer { padding: 16px; }
        }
    </style>
    
    <!-- Async load non-critical CSS -->
    <link rel="stylesheet" href="https://fonts.googleapis.com/css2?family=Inter:wght@400;500;700;900&display=swap" media="print" onload="this.media='all'">
    <link rel="stylesheet" href="https://fonts.googleapis.com/css2?family=Roboto+Mono:wght@400;500;700&display=swap" media="print" onload="this.media='all'">
    <link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/@phosphor-icons/web@2.1.1/src/regular/style.css" media="print" onload="this.media='all'">
    
    <link rel="icon" type="image/svg+xml" href="img/icons/favicon.svg">
    
    <!-- Performance configuration -->
    <script>
        // Performance monitoring
        window.perfStart = performance.now();
        
        // PartyKit Configuration
        window.PARTYKIT_HOST = 'quiz-world.t3mr0i.partykit.dev';
        
        const urlParams = new URLSearchParams(window.location.search);
        const isLocalhost = window.location.hostname === 'localhost' || window.location.hostname === '127.0.0.1';
        
        if (urlParams.has('dev') || urlParams.has('local') || isLocalhost) {
            window.PARTYKIT_HOST = 'localhost:1999';
            console.log('üîß Using local development server:', window.PARTYKIT_HOST);
        }
        
        window.CONFIG = {
            ALLOW_ANYONE_TO_START: urlParams.has('allow-all') || urlParams.has('all-start'),
            PERFORMANCE_MODE: urlParams.has('perf') || urlParams.has('performance')
        };
        
        // Performance debugging
        if (window.CONFIG.PERFORMANCE_MODE) {
            console.log('‚ö° Performance mode enabled');
            
            // Log timing milestones
            window.addEventListener('load', () => {
                console.log(`üèÅ Page loaded in ${(performance.now() - window.perfStart).toFixed(2)}ms`);
            });
            
            // Monitor First Contentful Paint
            new PerformanceObserver((list) => {
                for (const entry of list.getEntries()) {
                    if (entry.name === 'first-contentful-paint') {
                        console.log(`üé® First Contentful Paint: ${entry.startTime.toFixed(2)}ms`);
                    }
                }
            }).observe({ entryTypes: ['paint'] });
        }
    </script>
</head>
<body>
    <!-- Navigation Bar -->
    <nav class="navbar">
        <div class="navbar-container">
                <a href="#" class="navbar-brand">
                <i class="ph ph-brain"></i>
                <span>Quizaru</span>
                </a>
            </div>
    </nav>

    <div class="app-container">
        <main class="game-container">
            <!-- Welcome Screen -->
            <div id="welcome-screen" class="game-screen active">
                <div class="card welcome-card">
                    <div class="card-body">
                        <div class="welcome-options">
                            <div class="option-card" id="create-quiz-option">
                                <div class="option-icon"><i class="ph ph-target"></i></div>
                                <h3>Create New Quiz</h3>
                                <p>Generate a quiz with AI on any topic</p>
                                <button class="btn btn-primary">Create Quiz</button>
                            </div>
                            
                            <div class="option-card" id="create-tournament-option">
                                <div class="option-icon"><i class="ph ph-trophy"></i></div>
                                <h3>Create Tournament</h3>
                                <p>Combine multiple quizzes into one match</p>
                                <button class="btn btn-primary">Create Tournament</button>
                            </div>
                            
                            <div class="option-card" id="browse-quizzes-option">
                                <div class="option-icon"><i class="ph ph-books"></i></div>
                                <h3>Browse Quizzes</h3>
                                <p>Play existing quizzes and view highscores</p>
                                <button class="btn btn-outline">Browse Quizzes</button>
                            </div>
                            
                            <div class="option-card" id="join-quiz-option">
                                <div class="option-icon"><i class="ph ph-game-controller"></i></div>
                                <h3>Join Quiz Session</h3>
                                <p>Enter a room code to join an existing quiz</p>
                                <button class="btn btn-outline">Join Session</button>
                            </div>
                        </div>
                    </div>
                </div>
            </div>

            <!-- Create Quiz Screen -->
            <div id="create-quiz-screen" class="game-screen hidden">
                <div class="card">
                    <div class="card-header">
                        <h2>Create Your Quiz</h2>
                        <p>AI will generate questions based on your topic</p>
                    </div>
                    <div class="card-body">
                        <form id="create-quiz-form">
                            <div class="form-group">
                                <label for="quiz-title">Quiz Title</label>
                                <input type="text" id="quiz-title" placeholder="e.g., Video Games from 2010" required>
                            </div>
                            
                            <div class="form-group">
                                <label for="quiz-topic">Topic Description</label>
                                <textarea id="quiz-topic" placeholder="Describe what the quiz should be about..." required rows="3"></textarea>
                                <small>Be specific! Example: "Popular video games released in 2010, including indie and AAA titles"</small>
                            </div>
                            
                            <div class="form-row">
                                <div class="form-group">
                                    <label for="question-count">Number of Questions</label>
                                    <select id="question-count">
                                        <option value="5">5 Questions</option>
                                        <option value="10" selected>10 Questions</option>
                                        <option value="15">15 Questions</option>
                                        <option value="20">20 Questions</option>
                                    </select>
                                </div>
                                
                                <div class="form-group">
                                    <label for="quiz-language">Quiz Language</label>
                                    <select id="quiz-language">
                                        <option value="en">üá∫üá∏ English</option>
                                        <option value="es">üá™üá∏ Espa√±ol (Spanish)</option>
                                        <option value="fr">üá´üá∑ Fran√ßais (French)</option>
                                        <option value="de">üá©üá™ Deutsch (German)</option>
                                        <option value="it">üáÆüáπ Italiano (Italian)</option>
                                        <option value="nl">üá≥üá± Nederlands (Dutch)</option>
                                        <option value="pt">üáµüáπ Portugu√™s (Portuguese)</option>
                                        <option value="ja">üáØüáµ Êó•Êú¨Ë™û (Japanese)</option>
                                        <option value="ko">üá∞üá∑ ÌïúÍµ≠Ïñ¥ (Korean)</option>
                                        <option value="zh">üá®üá≥ ‰∏≠Êñá (Chinese)</option>
                                        <option value="ru">üá∑üá∫ –†—É—Å—Å–∫–∏–π (Russian)</option>
                                        <option value="ar">üá∏üá¶ ÿßŸÑÿπÿ±ÿ®Ÿäÿ© (Arabic)</option>
                                        <option value="hi">üáÆüá≥ ‡§π‡§ø‡§®‡•ç‡§¶‡•Ä (Hindi)</option>
                                        <option value="custom">‚úèÔ∏è Custom Language</option>
                                    </select>
                                    <small>Language for quiz questions and AI-generated content</small>
                                </div>
                            </div>
                            
                            <div class="form-group" id="custom-language-group" style="display: none;">
                                <label for="custom-language">Custom Language Name</label>
                                <input type="text" id="custom-language" placeholder="e.g., Swedish, Turkish, Polish...">
                                <small>Specify the language name for AI generation</small>
                            </div>
                            
                            <div class="form-row">
                                <div class="form-group">
                                    <label for="creator-name">Your Name</label>
                                    <input type="text" id="creator-name" placeholder="Quiz Creator" required>
                                </div>
                            </div>
                            
                            <div class="form-actions">
                                <button type="button" id="back-to-welcome" class="btn btn-text">‚Üê Back</button>
                                                            <button type="submit" id="generate-quiz-btn" class="btn btn-primary" style="color: white !important;">
                                <span class="btn-text" style="color: white !important;">Generate Quiz with AI</span>
                                </button>
                            </div>
                        </form>
                    </div>
                </div>
            </div>

            <!-- Browse Quizzes Screen -->
            <div id="browse-quizzes-screen" class="game-screen hidden">
                <div class="card">
                    <div class="card-header">
                        <h2>Browse Quizzes</h2>
                        <p>Play existing quizzes and view highscores</p>
                    </div>
                    <div class="card-body">
                        <div class="search-section">
                            <div class="search-bar">
                                <input type="text" id="quiz-search" placeholder="Search quizzes...">
                                <button id="search-btn" class="btn btn-primary">Search</button>
                            </div>
                            <div class="filter-tabs">
                                <button class="tab-btn active" data-filter="recent">Recent</button>
                                <button class="tab-btn" data-filter="popular">Popular</button>
                                <button class="tab-btn" data-filter="all">All</button>
                            </div>
                        </div>
                        <div id="quiz-list" class="quiz-list">
                            <!-- Quiz items will be populated here -->
                        </div>
                            <div class="form-actions">
                            <button type="button" id="back-to-welcome-3" class="btn btn-text">‚Üê Back</button>
                            </div>
                    </div>
                </div>
            </div>

            <!-- Create Tournament Screen -->
            <div id="create-tournament-screen" class="game-screen hidden">
                <div class="card">
                    <div class="card-header">
                        <h2>Create Tournament</h2>
                        <p>Combine multiple quizzes into one epic match</p>
                    </div>
                    <div class="card-body">
                        <form id="tournament-form">
                            <div class="form-row">
                                <div class="form-group">
                                    <label for="tournament-name">Tournament Name</label>
                                    <input type="text" id="tournament-name" placeholder="Epic Quiz Battle" required>
                                </div>
                                <div class="form-group">
                                    <label for="tournament-creator">Your Name</label>
                                    <input type="text" id="tournament-creator" placeholder="Tournament Host" required>
                                </div>
                            </div>
                            
                            <!-- Tournament Overview -->
                            <div class="tournament-overview">
                                <div class="tournament-stats">
                                    <div class="stat-card">
                                        <div class="stat-icon"><i class="ph ph-stack"></i></div>
                                        <div class="stat-info">
                                            <span class="stat-value" id="selected-quiz-count">0</span>
                                            <span class="stat-label">Quizzes Selected</span>
                                        </div>
                                    </div>
                                    <div class="stat-card">
                                        <div class="stat-icon"><i class="ph ph-note"></i></div>
                                        <div class="stat-info">
                                            <span class="stat-value" id="total-tournament-questions">0</span>
                                            <span class="stat-label">Total Questions</span>
                                        </div>
                                    </div>
                                    <div class="stat-card">
                                        <div class="stat-icon"><i class="ph ph-target"></i></div>
                                        <div class="stat-info">
                                            <span class="stat-value" id="max-tournament-score">0</span>
                                            <span class="stat-label">Max Score</span>
                                        </div>
                                    </div>
                                </div>
                            </div>
                            
                            <!-- Step Instructions -->
                            <div class="tournament-step">
                                <h3><i class="ph ph-selection-plus"></i> Select Quizzes for Tournament</h3>
                                <p>Choose at least 2 quizzes to combine into your tournament. Click on quiz cards to add them.</p>
                            </div>
                            
                            <!-- Available Quizzes Section -->
                            <div class="available-quizzes-section">
                                <div class="section-header">
                                    <h4>Available Quizzes</h4>
                                    <div class="quiz-counter">
                                        <span id="available-quiz-count">0</span> quizzes available
                                    </div>
                                </div>
                                <div id="available-quizzes" class="tournament-quiz-grid">
                                    <!-- Available quizzes will be loaded here -->
                                </div>
                            </div>
                            
                            <!-- Selected Quizzes Section -->
                            <div class="selected-quizzes-section">
                                <div class="section-header">
                                    <h4><i class="ph ph-check-circle"></i> Selected Quizzes</h4>
                                    <div class="selection-hint">
                                        <span id="selection-status">Select at least 2 quizzes to create tournament</span>
                                    </div>
                                </div>
                                <div id="selected-quizzes" class="selected-quiz-list">
                                    <div class="empty-selection">
                                        <i class="ph ph-selection-plus"></i>
                                        <p>No quizzes selected yet</p>
                                        <small>Click on quiz cards above to add them to your tournament</small>
                                    </div>
                                </div>
                            </div>
                            
                            <div class="form-actions">
                                <button type="button" id="back-to-welcome-tournament" class="btn btn-text">‚Üê Back</button>
                                <button type="submit" id="create-tournament-btn" class="btn btn-primary" disabled>
                                    <i class="ph ph-trophy"></i> <span id="tournament-btn-text">Select 2+ Quizzes to Continue</span>
                                </button>
                            </div>
                        </form>
                    </div>
                </div>
            </div>

            <!-- Join Session Screen -->
            <div id="join-session-screen" class="game-screen hidden">
                <div class="card">
                    <div class="card-header">
                        <h2>Join Quiz Session</h2>
                        <p>Enter the room code to join an existing quiz</p>
                    </div>
                    <div class="card-body">
                        <form id="join-session-form">
                            <div class="form-group">
                                <label for="room-code">Room Code</label>
                                <input type="text" id="room-code" placeholder="Enter 6-digit room code" required maxlength="6">
                            </div>
                            
                            <div class="form-group">
                                <label for="player-name">Your Name</label>
                                <input type="text" id="player-name" placeholder="Enter your name" required>
                            </div>
                            
                            <div class="form-actions">
                                <button type="button" id="back-to-welcome-2" class="btn btn-text">‚Üê Back</button>
                                <button type="submit" class="btn btn-primary">Join Session</button>
                            </div>
                        </form>
                    </div>
                </div>
            </div>

            <!-- Lobby Screen -->
            <div id="lobby-screen" class="game-screen hidden">
                <div class="card">
                    <div class="card-header">
                        <h2>Quiz Lobby</h2>
                        <div class="room-info">
                            <span>Room Code: <strong id="room-code-display">XXXXXX</strong></span>
                            <button id="copy-room-code" class="btn btn-text">Copy Link</button>
                        </div>
                    </div>
                    <div class="card-body">
                            <div class="quiz-info">
                            <h3 id="quiz-title-display">Quiz Title</h3>
                            <p id="quiz-topic-display">Quiz topic description</p>
                            <div class="quiz-meta">
                                <span><strong id="quiz-question-count">10</strong> questions</span>
                                <span>Created by <strong id="quiz-creator">Creator</strong></span>
                                </div>
                            </div>
                            
                            <div class="players-section">
                                <h3>Players (<span id="player-count">0</span>)</h3>
                            <ul id="player-list" class="player-list">
                                <!-- Players will be listed here -->
                            </ul>
                        </div>
                                
                        <div class="lobby-actions">
                            <button id="ready-btn" class="btn btn-outline">Ready to Play</button>
                                    <div id="host-controls" class="host-controls hidden">
                                <button id="start-quiz-btn" class="btn btn-primary">Start Quiz</button>
                            </div>
                        </div>
                    </div>
                </div>
            </div>

            <!-- Quiz Screen -->
            <div id="quiz-screen" class="game-screen hidden">
                <div class="card">
                    <div class="card-header">
                        <div class="question-info">
                            <div class="question-progress">
                                <span class="question-counter">Question <span id="current-question-num">1</span> of <span id="total-questions">10</span></span>
                                <div class="progress-bar">
                                    <div class="progress-fill" id="question-progress-fill"></div>
                                </div>
                            </div>
                            <div class="player-status">
                                <div class="answer-counter">
                                    <i class="ph ph-users"></i>
                                    <span><span id="players-answered">0</span>/<span id="total-players-quiz">1</span> answered</span>
                                </div>
                                <div class="answer-status-indicator" id="answer-status">
                                    <span class="status-text">Waiting for answers...</span>
                                </div>
                            </div>
                        </div>
                        </div>
                    <div class="card-body">
                        <div class="question-section">
                            <h2 id="question-text">Question text will appear here</h2>
                        <div id="answer-options" class="answer-options">
                                <!-- Answer options will be populated here -->
                        </div>
                        </div>
                        
                        <!-- Inline Results (shown after answering) -->
                        <div id="inline-results" class="inline-results hidden">
                            <div class="result-info">
                                <h3 id="points-earned">+100 points!</h3>
                                <p id="current-score">Total Score: 100 points</p>
                                <p id="inline-explanation">Explanation text will appear here</p>
                            </div>
                            <div class="continue-actions">
                                <button id="continue-btn" class="btn btn-primary hidden">Next Question</button>
                                <button id="finish-quiz-btn" class="btn btn-primary hidden">View Final Results</button>
                    </div>
                        </div>
                        
                        <!-- Live Leaderboard -->
                            <div class="live-leaderboard">
                            <h3>
                                <i class="ph ph-trophy"></i>
                                Live Scores
                                <span id="leaderboard-status" class="leaderboard-status"></span>
                            </h3>
                            <div id="live-leaderboard-list" class="leaderboard">
                                <!-- Live scores will be updated here -->
                            </div>
                        </div>
                    </div>
                </div>
            </div>

            <!-- Results Screen -->
            <div id="results-screen" class="game-screen hidden">
                <div class="card">
                    <div class="card-header">
                        <h2>Question Results</h2>
                    </div>
                    <div class="card-body">
                        <div class="result-summary">
                            <h3 id="result-points">Points Earned</h3>
                            <p id="result-explanation">Explanation</p>
                        </div>
                        
                        <div class="current-standings">
                            <h3>Current Standings</h3>
                            <div id="current-leaderboard" class="leaderboard">
                                <!-- Current standings will be shown here -->
                            </div>
                        </div>
                        
                        <div class="result-actions">
                            <button id="next-question-btn" class="btn btn-primary">Next Question</button>
                            <button id="view-final-results-btn" class="btn btn-outline hidden">View Final Results</button>
                        </div>
                    </div>
                </div>
            </div>

            <!-- Final Results Screen -->
            <div id="final-results-screen" class="game-screen hidden">
                <div class="card">
                    <div class="card-header">
                        <h2>üèÅ Quiz Complete!</h2>
                        <p>Here are the final results</p>
                    </div>
                    <div class="card-body">
                        <div class="final-standings">
                            <h3>Final Leaderboard</h3>
                            <div id="final-leaderboard" class="leaderboard">
                                <!-- Final results will be shown here -->
                            </div>
                        </div>
                        
                        <div class="final-actions">
                            <button id="play-again-btn" class="btn btn-outline">Play Again</button>
                            <button id="new-quiz-btn" class="btn btn-primary">Create New Quiz</button>
                        </div>
                    </div>
                </div>
            </div>
        </main>
    </div>

    <!-- Modal Dialogs -->
    <!-- Alert Modal -->
    <div id="alert-modal" class="modal-overlay hidden">
        <div class="modal-content">
            <div class="modal-header">
                <h3 class="modal-title">Alert</h3>
            </div>
            <div class="modal-body">
                <p id="alert-message"></p>
            </div>
            <div class="modal-footer">
                <button id="alert-ok-btn" class="btn btn-primary">OK</button>
            </div>
        </div>
    </div>

    <!-- Confirm Modal -->
    <div id="confirm-modal" class="modal-overlay hidden">
        <div class="modal-content">
            <div class="modal-header">
                <h3 class="modal-title">Confirm</h3>
            </div>
            <div class="modal-body">
                <p id="confirm-message"></p>
            </div>
            <div class="modal-footer">
                <button id="confirm-cancel-btn" class="btn btn-outline">Cancel</button>
                <button id="confirm-ok-btn" class="btn btn-primary">Confirm</button>
            </div>
        </div>
    </div>

    <!-- Prompt Modal -->
    <div id="prompt-modal" class="modal-overlay hidden">
        <div class="modal-content">
            <div class="modal-header">
                <h3 class="modal-title">Input Required</h3>
            </div>
            <div class="modal-body">
                <p id="prompt-message"></p>
                <input type="text" id="prompt-input" class="form-control">
            </div>
            <div class="modal-footer">
                <button id="prompt-cancel-btn" class="btn btn-outline">Cancel</button>
                <button id="prompt-ok-btn" class="btn btn-primary">OK</button>
            </div>
        </div>
    </div>

    <!-- Loading Overlay -->
    <div id="loading-overlay" class="loading-overlay hidden">
        <div class="loading-content">
            <div class="loading-spinner"></div>
            <h3 id="loading-message">Loading...</h3>
            <p id="loading-submessage">Please wait...</p>
        </div>
    </div>

    <!-- Toast Container -->
    <div id="toast-container" class="toast-container"></div>

    <!-- Load Firebase config first -->
    <script src="js/firebase-config.js" defer></script>
    
    <!-- Load main application -->
    <script type="module" src="js/quiz-game.js" defer></script>
    
    <!-- Fallback for older browsers -->
    <script nomodule>
        console.warn('This browser does not support ES modules. Please use a modern browser.');
        alert('Please use a modern browser like Chrome, Firefox, Safari, or Edge for the best experience.');
    </script>
</body>
</html>